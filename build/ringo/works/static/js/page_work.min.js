function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){var n=[],a=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(a=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return n}function _arrayWithHoles(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,n,a,r,o,i){try{var s=e[o](i),d=s.value}catch(e){return void n(e)}s.done?t(d):Promise.resolve(d).then(a,r)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(a,r){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,a,r,i,s,"next",e)}function s(e){asyncGeneratorStep(o,a,r,i,s,"throw",e)}i(void 0)})}}function setSizes(){return _setSizes.apply(this,arguments)}function _setSizes(){return(_setSizes=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$(".infoItem").width(),e.next=3,setSizesToImages(t);case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function setSizesToImages(e){return new Promise(function(t){$(".imgcfg").one("load",function(){var t=_slicedToArray(getSize($(this)),2),n=t[0];t[1];$(this).parent().width(n),e+=n,$(".workInfo").width(e)}).each(function(){this.complete&&$(this).trigger("load")}),setTimeout(function(){t()},1e3)})}function getSize(e){return[e.width(),e.height()]}function drawContent(e){var t=document.createElement("div");$(t).addClass("workInfo");for(var n=0;n<e.length;n++)$(t).append(selectDrawModeAndDraw(e[n]));return t}function selectDrawModeAndDraw(e){var t=null;return"info"==e.type?t=drawInfoItem(e):"video"==e.type?(t=drawVideoItem(e),videoObj[e.id]=e):"integrated_video"==e.type?(t=drawIntegratedVideoItem(e),videoObj[e.id]={src:e.src,title:e.title}):t=drawImageItem(e),t}function drawImageItem(e){var t='<div class="workItem">';return e.link?(t+='<a href="'+e.link+'" target="_blank">',t+='<img class="workImage workContent imgcfg" src="'+e.src,t+='" alt="'+e.alt+'"></a></div>'):(t+='<img class="workImage workContent imgcfg" src="'+e.src,t+='" alt="'+e.alt+'"></div>'),t}function drawVideoItem(e){var t='<div class="workItem videoItem">';return t+='<img class="imgcfg" ',e.previewImage?t+='src="'+e.previewImage+'"':e.color?t+='style="background-color:'+e.color+'"':t+='style="background-color: #333"',t+=' alt="'+e.title+'">',t+='<a href="#" class="prevIcon" title="'+e.title+'" vid="'+e.id+'" own="'.concat("video"==e.type?"true":"false",'">\n\t\t<img class="playIcon" src="/static/system/play.svg" alt="play icon">\n\t</a><div class="previewcover"></div></div>')}function drawIntegratedVideoItem(e){var t='<div class="workItem videoItem">';return t+='<img class="imgcfg" ',e.previewImage?t+='src="'+e.previewImage+'"':e.color?t+='style="background-color:'+e.color+'"':t+='style="background-color: #333"',t+=' alt="'+e.title+'">',t+='<a href="#" class="prevIcon" title="'+e.title+'" vid="'+e.id+'">\n\t\t<img class="playIcon" src="/static/system/play.svg" alt="play icon">\n\t</a><div class="previewcover"></div></div>'}function drawInfoItem(e){var t=document.createElement("div");$(t).addClass("workItem infoItem");var n=document.createElement("div");$(n).addClass("infoWrapper");var a=document.createElement("div");$(a).addClass("paramTitle main"),$(a).text("Title");var r=document.createElement("h1");$(r).addClass("paramValue main"),$(r).text(e.title);var o=document.createElement("div");$(o).addClass("itmEtc");var i=document.createElement("div");$(i).addClass("paramLine");var s=document.createElement("span");$(s).addClass("paramTitle"),$(s).text("Launch");var d=document.createElement("span");$(d).addClass("paramValue"),$(d).text(e.launch),$(i).append(s),$(i).append(d);var l=document.createElement("div");$(l).addClass("paramLine");var c=document.createElement("span");$(c).addClass("paramTitle"),$(c).text("Category");var p=document.createElement("span");$(p).addClass("paramValue"),$(p).text(e.category),$(l).append(c),$(l).append(p);var u=document.createElement("div");$(u).addClass("paramLine");var m=document.createElement("span");$(m).addClass("paramTitle"),$(m).text("Client");var v=document.createElement("span");$(v).addClass("paramValue"),$(v).text(e.client),$(u).append(m),$(u).append(v),$(o).append(i),$(o).append(l),$(o).append(u);var w=document.createElement("div");return $(w).append(a),$(w).append(r),$(t).append(n),$(n).append(w),$(n).append(o),t}function showVideo(){$(".fullView").removeClass("-hidden-"),motion.pauseMovement()}function closeVideo(){try{$.isEmptyObject(player)||(player.pause(),delete videojs.players[player.id_],player=null)}catch(e){console.log("Player does't exist")}$(".fullView").addClass("-hidden-"),$("#videoContent").empty(),motion.resumeMovement()}function drawVideo(e){var t=$.parseHTML(videoObj[e].src)[0].data;$("#videoContent")[0].innerHTML=t}function drawOwnVideo(e){var t='\n\t\t<video id="'.concat(e.id,'" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264" poster="').concat(e.previewImage,'"\n\t\t data-setup="{}" title="">\n\t\t ').concat(e.srcMP4?'<source src="'+e.srcMP4+'" type="video/mp4">':"","\n\t\t ").concat(e.srcwebm?'<source src="'+e.srcwebm+'" type="video/webm">':"",'\n\t\t <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>\n\t\t</video>');$("#videoContent").append(t),(player=videojs(e.id,{controls:!0,liveui:!1})).src([{type:"video/mp4",src:e.srcMP4},{type:"video/webm",src:e.srcwebm}]),player.ready(function(){player.play(),player.pause()})}function clearContent(){$("#wrapper2").empty()}function setContent(){clearContent(),$("#wrapper2").append(drawContent(textData))}var videoObj={},motion=null,type="";function setView(){$(window).width()>=768?("desktop"!=type&&(type="desktop",setContent()),null==motion?(motion=new Motion).init({elem:".workInfo"}):motion.updateData(".workInfo"),setSizes().then(function(){motion.animationOn()})):(null!=motion&&motion.animationOff(),"mobile"!=type&&(type="mobile",setContent()))}setView(),$(window).on("resize",function(e){setView()}),$(document).on("keyup",function(e){27==e.keyCode&&closeVideo()}),$("body").delegate(".fullView__close","click",closeVideo),$("body").delegate(".prevIcon","click",function(e){e.preventDefault(),"true"==$(this).attr("own")?drawOwnVideo(videoObj[$(this).attr("vid")]):drawVideo($(this).attr("vid")),showVideo()});var player=null;videojs.TOUCH_ENABLED=!0,window.addEventListener("orientationchange",function(){if(null!=player){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;"landscape-primary"==e||"landscape-secondary"==e?($(window).scrollTop(),player.focus(),$(".vjs-fullscreen-control").click(),player.enterFullScreen(),player.enterFullWindow()):(player.exitFullscreen(),player.exitFullWindow())}},!1),$(document).delegate(".vjs-play-control, .vjs-tech, .vjs-big-play-button","click",function(e){player.paused()?$(".vjs-big-play-button").show():$(".vjs-big-play-button").hide()});