"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var a=[],n=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function setSizes(){setSizesToImages($(".infoItem").width())}function setSizesToImages(e){return new Promise(function(t){$(".imgcfg").one("load",function(){var t=_slicedToArray(getSize($(this)),2),a=t[0];t[1];$(this).parent().width(a),e+=a,$(".workInfo").width(e)}).each(function(){this.complete&&$(this).trigger("load")}),setTimeout(function(){t()},1e3)})}function getSize(e){return[e.width(),e.height()]}function drawContent(e){var t=document.createElement("div");$(t).addClass("workInfo");for(var a=0;a<e.length;a++)$(t).append(selectDrawModeAndDraw(e[a]));return t}function selectDrawModeAndDraw(e){var t=null;return"info"==e.type?t=drawInfoItem(e):"video"==e.type?(t=drawVideoItem(e),videoObj[e.id]=e):"integrated_video"==e.type?(t=drawIntegratedVideoItem(e),videoObj[e.id]={src:e.src,title:e.title}):t=drawImageItem(e),t}function drawImageItem(e){var t='<div class="workItem">';return e.link?(t+='<a href="'+e.link+'" target="_blank">',t+='<img class="workImage workContent imgcfg" src="'+e.src,t+='" alt="'+e.alt+'"></a></div>'):(t+='<img class="workImage workContent imgcfg" src="'+e.src,t+='" alt="'+e.alt+'"></div>'),t}function drawVideoItem(e){var t='<div class="workItem videoItem">';return t+='<img class="imgcfg" ',e.previewImage?t+='src="'+e.previewImage+'"':e.color?t+='style="background-color:'+e.color+'"':t+='style="background-color: #333"',t+=' alt="'+e.title+'">',t+='<a href="#" class="prevIcon" title="'+e.title+'" vid="'+e.id+'" own="'.concat("video"==e.type?"true":"false",'">\n\t\t<img class="playIcon" src="/static/system/play.svg" alt="play icon">\n\t</a><div class="previewcover"></div></div>')}function drawIntegratedVideoItem(e){var t='<div class="workItem videoItem">';return t+='<img class="imgcfg" ',e.previewImage?t+='src="'+e.previewImage+'"':e.color?t+='style="background-color:'+e.color+'"':t+='style="background-color: #333"',t+=' alt="'+e.title+'">',t+='<a href="#" class="prevIcon" title="'+e.title+'" vid="'+e.id+'">\n\t\t<img class="playIcon" src="/static/system/play.svg" alt="play icon">\n\t</a><div class="previewcover"></div></div>'}function drawInfoItem(e){var t=document.createElement("div");$(t).addClass("workItem infoItem");var a=document.createElement("div");$(a).addClass("infoWrapper");var n=document.createElement("div");$(n).addClass("paramTitle main"),$(n).text("Title");var r=document.createElement("h1");$(r).addClass("paramValue main"),$(r).text(e.title);var o=document.createElement("div");$(o).addClass("itmEtc");var i=document.createElement("div");$(i).addClass("paramLine");var l=document.createElement("span");$(l).addClass("paramTitle"),$(l).text("Launch");var d=document.createElement("span");$(d).addClass("paramValue"),$(d).text(e.launch),$(i).append(l),$(i).append(d);var s=document.createElement("div");$(s).addClass("paramLine");var c=document.createElement("span");$(c).addClass("paramTitle"),$(c).text("Category");var p=document.createElement("span");$(p).addClass("paramValue"),$(p).text(e.category),$(s).append(c),$(s).append(p);var m=document.createElement("div");$(m).addClass("paramLine");var u=document.createElement("span");$(u).addClass("paramTitle"),$(u).text("Client");var v=document.createElement("span");$(v).addClass("paramValue"),$(v).text(e.client),$(m).append(u),$(m).append(v),$(o).append(i),$(o).append(s),$(o).append(m);var w=document.createElement("div");return $(w).append(n),$(w).append(r),$(t).append(a),$(a).append(w),$(a).append(o),t}function showVideo(){$(".fullView").removeClass("-hidden-"),motion.pauseMovement()}function closeVideo(){try{$.isEmptyObject(player)||(player.pause(),delete videojs.players[player.id_],player=null)}catch(e){console.log("Player does't exist")}$(".fullView").addClass("-hidden-"),$("#videoContent").empty(),motion.resumeMovement()}function drawVideo(e){var t=$.parseHTML(videoObj[e].src)[0].data;$("#videoContent")[0].innerHTML=t}function drawOwnVideo(e){var t='\n\t\t<video id="'.concat(e.id,'" class="video-js vjs-default-skin" controls preload="auto" width="640" height="264" poster="').concat(e.previewImage,'"\n\t\t data-setup="{}" title="">\n\t\t ').concat(e.srcMP4?'<source src="'+e.srcMP4+'" type="video/mp4">':"","\n\t\t ").concat(e.srcwebm?'<source src="'+e.srcwebm+'" type="video/webm">':"",'\n\t\t <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>\n\t\t</video>');$("#videoContent").append(t),(player=videojs(e.id,{controls:!0,liveui:!1})).src([{type:"video/mp4",src:e.srcMP4},{type:"video/webm",src:e.srcwebm}]),player.ready(function(){player.play(),player.pause()})}function clearContent(){$("#wrapper2").empty()}function setContent(){clearContent(),$("#wrapper2").append(drawContent(textData))}var videoObj={},motion=null,type="";function setView(){$(window).width()>=768?("desktop"!=type&&(type="desktop",setContent()),null==motion?(motion=new Motion).init({elem:".workInfo"}):motion.updateData(".workInfo"),setSizes().then(function(){motion.animationOn()})):(null!=motion&&motion.animationOff(),"mobile"!=type&&(type="mobile",setContent()))}setView(),$(window).on("resize",function(e){setView()}),$(document).on("keyup",function(e){27==e.keyCode&&closeVideo()}),$("body").delegate(".fullView__close","click",closeVideo),$("body").delegate(".prevIcon","click",function(e){e.preventDefault(),"true"==$(this).attr("own")?drawOwnVideo(videoObj[$(this).attr("vid")]):drawVideo($(this).attr("vid")),showVideo()});var player=null;videojs.TOUCH_ENABLED=!0,window.addEventListener("orientationchange",function(){if(null!=player){var e=screen.msOrientation||screen.mozOrientation||(screen.orientation||{}).type;"landscape-primary"==e||"landscape-secondary"==e?($(window).scrollTop(),player.focus(),$(".vjs-fullscreen-control").click(),player.enterFullScreen(),player.enterFullWindow()):(player.exitFullscreen(),player.exitFullWindow())}},!1),$(document).delegate(".vjs-play-control, .vjs-tech, .vjs-big-play-button","click",function(e){player.paused()?$(".vjs-big-play-button").show():$(".vjs-big-play-button").hide()});