function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var a=0;a<s.length;a++){var t=s[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,s,a){return s&&_defineProperties(e.prototype,s),a&&_defineProperties(e,a),e}var SCREEN_RATIO=16/9,maxScroll=0,WINDOW=$(window);function moveInfinate(){var e=0;setInterval(function(){$(".infiniteList").css("margin",e),e-=5},100)}function reDrawImages(e){e.width(e.height()*SCREEN_RATIO)}function openIcon(e){e.css("display","block")}function closeIcon(e){e.css("display","none")}reDrawImages($(".infiniteItem")),$("#header-menu, #hideMenu").on("click",function(e){$(".side-header").toggleClass("open"),$(".backlayer").toggleClass("-visible-"),$(".side-header").hasClass("open")?$(".hmenu-text").html("Close"):$(".hmenu-text").html("Menu")}),$(".side-header").on("click",function(e){$(".side-header").hasClass("open")&&($(".side-header").removeClass("open"),$(".backlayer").removeClass("-visible-"),$(".side-header .line.is-b").css("display","block"),$(".hmenu-text").html("Menu"))}),$(".toggleBtn").on("click",function(e){var s=$(this),a=s.attr("toggle-target"),t=$('.toggleList[toggle-data="'.concat(a,'"]'));s.find(".toggleBtn__icon").empty(),s.hasClass("collapse")?(s.removeClass("collapse"),t.addClass("-hidden-"),s.find(".toggleBtn__icon").append('<i class="fas fa-caret-down"></i>')):(s.addClass("collapse"),t.removeClass("-hidden-"),s.find(".toggleBtn__icon").append('<i class="fas fa-caret-up"></i>'))}),$(".iconBtnBox").on("click",function(e){e.stopPropagation(),$(this).toggleClass("open"),$(this).hasClass("open")?closeIcon($(this).find(".line.is-b")):openIcon($(this).find(".line.is-b"))}),WINDOW.on("resize",function(e){reDrawImages($(".infiniteItem"))});var response_statuses=["success","spamer","fail"],resp_actions={success:function(){$(".contactForm__send").addClass("is-complete"),$("#btntxt").text("Отправлено"),new Noty({type:"success",layout:"center",text:"Ваше письмо отправлено администратору сайта CAR-TUBE",timeout:5e3}).show()},spamer:function(){new Noty({type:"error",layout:"center",text:"Вы похожи на спамера."}).show()},fail:function(){new Noty({type:"error",layout:"center",text:"Произошла ошибка при отправке сообщения. Попробуйте повторить операцию позднее."}).show()}};function sendEmail(){var e=getFieldData();e.token=$("#g-recaptcha-responce").val(),$.ajax({url:"/api/send_email_to_admin/12/",type:"POST",data:e,dataType:"json",success:function(e){console.log("response:",e.status),console.log(response_statuses.indexOf(e.status)),-1!==response_statuses.indexOf(e.status)&&resp_actions[e.status]()}})}var Field=function(){function e(s){_classCallCheck(this,e),this.name=s.name,this.field=$(s.field),this.err_msg=s.err_msg,this.is_valid=!1}return _createClass(e,[{key:"validate",value:function(){return""==this.field.val()?this.is_valid=!1:this.is_valid=!0,this.is_valid}}]),e}(),Validator=function(){function e(s){_classCallCheck(this,e),this.fields={},this.is_form_valid=!1,this._init(s)}return _createClass(e,[{key:"_init",value:function(e){for(var s in e)this.fields[e[s].name]=new Field(e[s])}},{key:"isFieldValid",value:function(e){return this.fields[e].validate()}},{key:"isFormValid",value:function(){for(var e in this.is_form_valid=!1,this.fields){if(1!=this.fields[e].validate()){this.is_form_valid=!1;break}this.is_form_valid=!0}return this.is_form_valid}}]),e}(),validator=new Validator([{name:"name",field:"#name",err_msg:"Поле 'ФИО' не должно быть пустым"},{name:"email",field:"#email",err_msg:"Поле 'E-mail' не должно быть пустым"},{name:"message",field:"#message",err_msg:"Поле 'Сообщение' не должно быть пустым"}]),reasons={collaboration:"Сотрудничество",questions_and_offers:"Вопросы и предложения"};function getFieldData(){var e={};return e.name=$("#name").val(),e.company=$("#company").val(),e.email=$("#email").val(),e.website=$("#website").val(),e.reason=reasons[$("#reason option:selected").val()],e.message=$("#message").val(),e}function checkField(e){validator.isFieldValid(e)?(validator.fields[e].field.addClass("on_success"),validator.fields[e].field.removeClass("on_error")):(console.log(validator.fields[e].err_msg),validator.fields[e].field.removeClass("on_success"),validator.fields[e].field.addClass("on_error"))}$(".form_input").on("change",function(e){e.preventDefault(),checkField($(this).attr("name"))}),$(".form_input").on("keyup",function(e){e.preventDefault();var s=$(this);""==s.val()?"empty"!=s.attr("valstate")&&(s.attr("valstate","empty"),new Noty({type:"warning",layout:"center",text:validator.fields[s.attr("name")].err_msg,timeout:3e3}).show()):(s.attr("valstate","fill"),checkField(s.attr("name"))),validator.isFormValid()?($(".contactForm__send").addClass("is-ok"),$(".contactForm__send").attr("disabled",!1)):($(".contactForm__send").removeClass("is-ok"),$(".contactForm__send").attr("disabled",!0))}),$("#send_email").on("click",sendEmail);