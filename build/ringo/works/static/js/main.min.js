function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,a){for(var i=0;i<a.length;i++){var t=a[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,a,i){return a&&_defineProperties(e.prototype,a),i&&_defineProperties(e,i),e}var SCREEN_RATIO=16/9,maxScroll=0,WINDOW=$(window);function moveInfinate(){var e=0;setInterval(function(){$(".infiniteList").css("margin",e),e-=5},100)}function reDrawImages(e){e.width(e.height()*SCREEN_RATIO)}function openIcon(e){e.css("display","block")}function closeIcon(e){e.css("display","none")}function sendEmail(){var e=getFieldData();$.ajax({url:"/api/send_email_to_admin/12/",type:"POST",data:e,dataType:"json",success:function(e){"success"==e?($(".contactForm__send").addClass("is-complete"),$("#btntxt").text("Отправлено"),new Noty({type:"success",layout:"center",text:"Ваше письмо отправлено администратору сайта CAR-TUBE",timeout:5e3}).show()):new Noty({type:"error",layout:"center",text:"Произошла ошибка при отправке сообщения. Попробуйте повторить операцию позднее."}).show()}})}reDrawImages($(".infiniteItem")),$("#header-menu, #hideMenu").on("click",function(e){$(".side-header").toggleClass("open"),$(".backlayer").toggleClass("-visible-"),$(".side-header").hasClass("open")?$(".hmenu-text").html("Close"):$(".hmenu-text").html("Menu")}),$(".side-header").on("click",function(e){$(".side-header").hasClass("open")&&($(".side-header").removeClass("open"),$(".backlayer").removeClass("-visible-"),$(".side-header .line.is-b").css("display","block"),$(".hmenu-text").html("Menu"))}),$(".toggleBtn").on("click",function(e){var a=$(this),i=a.attr("toggle-target"),t=$('.toggleList[toggle-data="'.concat(i,'"]'));a.find(".toggleBtn__icon").empty(),a.hasClass("collapse")?(a.removeClass("collapse"),t.addClass("-hidden-"),a.find(".toggleBtn__icon").append('<i class="fas fa-caret-down"></i>')):(a.addClass("collapse"),t.removeClass("-hidden-"),a.find(".toggleBtn__icon").append('<i class="fas fa-caret-up"></i>'))}),$(".iconBtnBox").on("click",function(e){e.stopPropagation(),$(this).toggleClass("open"),$(this).hasClass("open")?closeIcon($(this).find(".line.is-b")):openIcon($(this).find(".line.is-b"))}),WINDOW.on("resize",function(e){reDrawImages($(".infiniteItem"))});var Field=function(){function e(a){_classCallCheck(this,e),this.name=a.name,this.field=$(a.field),this.err_msg=a.err_msg,this.is_valid=!1}return _createClass(e,[{key:"validate",value:function(){return""==this.field.val()?this.is_valid=!1:this.is_valid=!0,this.is_valid}}]),e}(),Validator=function(){function e(a){_classCallCheck(this,e),this.fields={},this.is_form_valid=!1,this._init(a)}return _createClass(e,[{key:"_init",value:function(e){for(var a in e)this.fields[e[a].name]=new Field(e[a])}},{key:"isFieldValid",value:function(e){return this.fields[e].validate()}},{key:"isFormValid",value:function(){for(var e in this.is_form_valid=!1,this.fields){if(1!=this.fields[e].validate()){this.is_form_valid=!1;break}this.is_form_valid=!0}return this.is_form_valid}}]),e}(),validator=new Validator([{name:"name",field:"#name",err_msg:"Поле 'ФИО' не должно быть пустым"},{name:"email",field:"#email",err_msg:"Поле 'E-mail' не должно быть пустым"},{name:"message",field:"#message",err_msg:"Поле 'Сообщение' не должно быть пустым"}]);function getFieldData(){var e={};return e.name=$("#name").val(),e.company=$("#company").val(),e.email=$("#email").val(),e.website=$("#website").val(),e.reason=$("#reason option:selected").val(),e.message=$("#message").val(),e}function checkField(e){validator.isFieldValid(e)?(validator.fields[e].field.addClass("on_success"),validator.fields[e].field.removeClass("on_error")):(console.log(validator.fields[e].err_msg),validator.fields[e].field.removeClass("on_success"),validator.fields[e].field.addClass("on_error"))}$(".form_input").on("change",function(e){e.preventDefault(),checkField($(this).attr("name"))}),$(".form_input").on("keyup",function(e){e.preventDefault();var a=$(this);""==a.val()?"empty"!=a.attr("valstate")&&(a.attr("valstate","empty"),new Noty({type:"warning",layout:"center",text:validator.fields[a.attr("name")].err_msg,timeout:5e3}).show()):(a.attr("valstate","fill"),checkField(a.attr("name"))),validator.isFormValid()?($(".contactForm__send").addClass("is-ok"),$(".contactForm__send").attr("disabled",!1)):($(".contactForm__send").removeClass("is-ok"),$(".contactForm__send").attr("disabled",!0))}),$("#send_email").on("click",sendEmail);