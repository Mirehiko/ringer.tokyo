function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window["".concat(t[i],"RequestAnimationFrame")],window.cancelAnimationFrame=window["".concat(t[i],"CancelAnimationFrame")]||window["".concat(t[i],"CancelRequestAnimationFrame")];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var n=(new Date).getTime(),o=Math.max(0,16-(n-e)),s=window.setTimeout(function(){t(n+o)},o);return e=n+o,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var Motion=function(){function e(){return _classCallCheck(this,e),this.xPos=0,this.yPos=0,this.pos=0,this.content_length=0,this.elem=null,this.container=null,this.is_events_attached=!1,this.is_paused=!1,this.is_animated=!1,this.requestID=void 0,this.on_animation=!0,this.current_way="normal",this.axis="horizontal",this.speed=1,this.key_delta=10,this.has_pause_evt=!1,this.delay_timer=null,this.delayAfterHover=1e3,this.on_hover="nothing",this.on_hover_objs="",this.hoveringItem=null,this.hoverBgn=0,this.hoverEnd=0,this.mouseX=0,this.mouseY=0,this}return _createClass(e,[{key:"init",value:function(e){var t=this;return this.elem=$(e.elem),this.axis=e.axis||"horizontal",this.speed=e.speed||1,this.key_delta=e.key_delta||10,this.has_pause_evt=e.has_pause_evt||!1,this.delayAfterHover=1e3*e.delayAfterHover||1e3,this.on_hover=e.on_hover||"nothing",this.on_hover_objs=e.on_hover_objs,this.container=e.container,console.log("[LOG] Data initialized"),$(window).on("resize",function(){t.on_animation&&t.initAnimation()}),this}},{key:"animationOff",value:function(){return this.on_animation=!1,this.stopMovement(),this}},{key:"animationOn",value:function(){return this.on_animation=!0,this.initAnimation(),this}},{key:"updateData",value:function(e){return this.elem=$(e),this}},{key:"initAnimation",value:function(){return this._isNeedToAnimate(this.elem)?(this._prepareToAnimate(),this.is_events_attached||(console.log("[LOG] Starting attach mouse events"),this._mouseActions(),console.log("[LOG] Mouse events attached"),console.log("[LOG] Starting attach keyboard events"),this._keyboardActions(),console.log("[LOG] Keyboard events attached"),this.is_events_attached=!0),this.is_animated||this.startMovement()):(this.stopMovement(),this.elem.find(".fake").remove(),this._setPosition(!0)),this}},{key:"startMovement",value:function(){this._render(),this.is_animated=!0,console.log("[EVENT] Animation started")}},{key:"resumeMovement",value:function(){this.is_animated=!0,console.log("[EVENT] Animation resumes")}},{key:"pauseMovement",value:function(){this.is_animated=!1,console.log("[EVENT] Animation paused")}},{key:"stopMovement",value:function(){this.requestID&&(window.cancelAnimationFrame(this.requestID),this.requestID=void 0,this.is_animated=!1,this._resetToDefault()),console.log("[EVENT] Animation stopped")}},{key:"_mouseActions",value:function(){var e=this;$(window).on("mousewheel",function(t){e.is_animated&&(e.is_paused=!0,t.deltaY>0?(e.pos+=t.deltaFactor,e.pos=e._calcScroll(e.pos,"reverse")):(e.pos-=t.deltaFactor,e.pos=e._calcScroll(e.pos,"normal")),e._setPosition(),e.has_pause_evt?(e.is_paused=!0,clearTimeout(e.delay_timer),e.delay_timer=setTimeout(function(){e.is_paused=!1},e.delayAfterHover)):e.is_paused=!1)}),this.on_hover_objs&&(this.container.delegate(this.on_hover_objs,"mousemove",function(t){e.mouseX=t.pageX,e.mouseY=t.pageY,e.hoveringItem=$(t.target).closest(e.on_hover_objs),e.hoveringItem.addClass("-hover-")}),this.container.delegate(this.on_hover_objs,"mouseleave",function(){null!==e.hoveringItem&&(e.hoveringItem.removeClass("-hover-"),e.hoveringItem=null)})),"pause"===this.on_hover&&this.container.delegate(".hoverAction","mousemove",function(){e.is_paused=!0,clearTimeout(e.delay_timer),e.delay_timer=setTimeout(function(){e.is_paused=!1},e.delayAfterHover)})}},{key:"_keyboardActions",value:function(){var e=this;$(window).on("keydown",function(t){e.is_animated&&(e.is_paused=!0,37===t.keyCode||38===t.keyCode?(e.pos+=e.key_delta,e.pos=e._calcScroll(e.pos,"reverse")):39!==t.keyCode&&40!==t.keyCode||(e.pos-=e.key_delta,e.pos=e._calcScroll(e.pos,"normal")),e._setPosition())}),$(window).on("keyup",function(){e.is_animated&&(e.is_paused=!1)})}},{key:"_calcScroll",value:function(e,t){return"normal"===t&&this.current_way===t&&e<=-this.content_length&&(e=0),"reverse"===t&&(this.current_way,e>=0&&(e-=this.content_length)),this.current_way=t,e}},{key:"_getEdgesOfHover",value:function(){this.hoverBgn=this.hoveringItem.offset().top,"horizontal"===this.axis?this.hoverEnd=this.hoveringItem.offset().left+this.hoveringItem.outerWidth():this.hoverEnd=this.hoveringItem.offset().top+this.hoveringItem.outerHeight()}},{key:"_isInsiteOfItem",value:function(){return"horizontal"===this.axis?this.mouseX>=this.hoverBgn&&this.mouseX<=this.hoverEnd:this.mouseY>=this.hoverBgn&&this.mouseY<=this.hoverEnd}},{key:"_setPosition",value:function(e){e?this.elem[0].style.transform="translate3d(0px, 0px, 0)":("horizontal"===this.axis?this.xPos=this.pos:this.yPos=this.pos,this.elem[0].style.transform="translate3d(".concat(this.xPos,"px, ").concat(this.yPos,"px, 0)"))}},{key:"_render",value:function(){var e=this;this.requestID=window.requestAnimationFrame(function t(){null!==e.hoveringItem&&(e._getEdgesOfHover(),e._isInsiteOfItem()||(e.hoveringItem.removeClass("-hover-"),e.hoveringItem=null)),!e.is_paused&&e.is_animated&&(e.pos--,e.pos=e._calcScroll(e.pos,"normal"),e._setPosition()),e.requestID&&(e.requestID=window.requestAnimationFrame(t))})}},{key:"_resetToDefault",value:function(){this.pos=0,this.xPos=0,this.yPos=0,this.current_way="normal"}},{key:"_setContentLength",value:function(e){return"horizontal"===this.axis?e.find(".fake").length?e.outerWidth()/2:e.outerWidth():e.find(".fake").length?e.outerHeight()/2:e.outerHeight()}},{key:"_prepareToAnimate",value:function(){console.log("[LOG] Starting prepare data to animate"),this.content_length=this._setContentLength(this.elem),this.is_animated||this.elem.append(e.copyContent(this.elem)),console.log("[LOG] Data to animate prepared")}},{key:"_isNeedToAnimate",value:function(e){var t=e||this.elem;return this._setContentLength(t)<("horizontal"===this.axis?t.parent().outerWidth():t.parent().outerHeight())?(console.log("[CHECK] Do not need to animate"),!1):(console.log("[CHECK] Need to animate"),!0)}}],[{key:"copyContent",value:function(e){return e.children().clone().addClass("fake")}}]),e}();