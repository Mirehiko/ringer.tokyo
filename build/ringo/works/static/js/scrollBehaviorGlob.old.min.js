"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){for(var e=0,t=["ms","moz","webkit","o"],i=0;i<t.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[t[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[i]+"CancelAnimationFrame"]||window[t[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){var s=(new Date).getTime(),n=Math.max(0,16-(s-e)),o=window.setTimeout(function(){t(s+n)},n);return e=s+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var MotionGlob=function(){function e(t,i){_classCallCheck(this,e),this.container=t,this.direction=i.direction||"down",this.delayAfterHover=1e3*i.delayAfterHover||1e3,this.onhover=i.onhover||"default",this.pauseOnScroll=null==i.pauseOnScroll||i.pauseOnScroll,this.itemClass=i.itemClass||"",this.indent=i.indent||0,this.itemPosition=0+this.indent,this.itemSpeed=i.speed||1,this.original=i.original,this.key_delta=10}return _createClass(e,[{key:"init",value:function(){var e=this,t=this;this.delay=null,this.isCanReplace=!0,this.hoverAction="hoverAction",this.needSide="",this.axis="",this.motion=null,this.setMotionDirection(),this.setEdges(),this.setOriginalSize(),this.setStartPosition(),this.addToStart(),this.addToEnd(),this.firstItem=this.container.children().first(),this.lastItem=this.container.children().last(),this.setPropsToFirst(this.firstItem),this.container.children().addClass(this.hoverAction),this.onpause=!1,this.mousetimer=null,this.hoveringItem=null,"nothing"==this.onhover&&(this.mouseX=0,this.mouseY=0),this.isBGCrossProgress=!1,this.isENDCrossProgress=!1,this.render(),this.container.on("mousewheel",function(e){e.preventDefault(),t.onpause=!0,e.deltaY>0?(t.itemPosition+=e.deltaFactor,t.replaceObjects("prev")):(t.itemPosition-=e.deltaFactor,t.replaceObjects("next")),t.pauseOnScroll?(clearTimeout(t.delay),t.delay=setTimeout(function(){t.onpause=!1},t.delayAfterHover)):t.onpause=!1}),$(window).on("keydown",function(i){e.onpause=!0,37==i.keyCode||38==i.keyCode?(t.itemPosition+=e.key_delta,t.replaceObjects("prev")):39!=i.keyCode&&40!=i.keyCode||(t.itemPosition-=e.key_delta,t.replaceObjects("next"))}),$(window).on("keyup",function(t){e.onpause=!1}),"pause"==this.onhover?this.container.delegate(".hoverAction","mousemove",function(e){t.onpause=!0,t.delay=setTimeout(function(){t.onpause=!1},t.delayAfterHover)}):"nothing"==this.onhover&&(this.container.delegate(this.itemClass,"mousemove",function(e){t.mouseX=e.pageX,t.mouseY=e.pageY,$(this).addClass("-hover-"),t.hoveringItem=$(this)}),this.container.delegate(this.itemClass,"mouseleave",function(e){e.preventDefault(),$(this).removeClass("-hover-"),t.hoveringItem=null})),$(window).on("resize",function(e){t.setEdges(),t.setOriginalSize()})}},{key:"getEdgesOfHover",value:function(){this.hoverBgn=this.hoveringItem.offset().top,"horizontal"==this.axis?this.hoverEnd=this.hoveringItem.offset().left+this.hoveringItem.outerWidth():this.hoverEnd=this.hoveringItem.offset().top+this.hoveringItem.outerHeight()}},{key:"offSroll",value:function(){this.container.css("margin",0),this.container.off("mousewheel mousemove mouseleave")}},{key:"setStartPosition",value:function(){this.itemPosition=-(this.bgEdge+Math.abs(this.originalSize-this.bgEdge))}},{key:"addToStart",value:function(){var e=this.original.clone();this.container.prepend(e)}},{key:"addToEnd",value:function(){this.container.append(this.original.clone())}},{key:"replaceObjects",value:function(e){this.isCanReplace=!1;this.setPropsToFirst(this.firstItem),"next"==e?(this.isAcrossBGEdge()&&(this.isBGCrossProgress=!0,this.addToEnd(),this.lastItem=this.container.children().last()),this.isFirstOut(this.firstItem)&&(this.isBGCrossProgress=!1,this.removeElem(this.firstItem),this.firstItem=this.container.children().first(),this.itemPosition+=this.originalSize,this.setPropsToFirst(this.firstItem))):(this.isAcrossEndEdge()&&(this.isENDCrossProgress=!0,this.firstItem.css("margin",0),this.addToStart(),this.firstItem=this.container.children().first(),this.itemPosition-=this.originalSize,this.setPropsToFirst(this.firstItem)),this.isLastOut(this.lastItem)&&(this.isENDCrossProgress=!1,this.removeElem(this.lastItem),this.lastItem=this.container.children().last())),this.isCanReplace=!0}},{key:"setOriginalSize",value:function(){"horizontal"==this.axis?this.originalSize=this.original.outerWidth():this.originalSize=this.original.outerHeight()}},{key:"getLastPosition",value:function(){return"horizontal"==this.axis?this.originalSize+this.lastItem.offset().left:this.originalSize+this.lastItem.offset().top}},{key:"hoverRemove",value:function(e){clearTimeout(e.mousetimer),e.mousetimer=setTimeout(function(){$(e.itemClass).removeClass("-hover-")},1e3)}},{key:"setEdges",value:function(){"horizontal"==this.axis?(this.bgEdge=$(window).width()/2,this.endEdge=$(window).width()+this.bgEdge):(this.bgEdge=$(window).height()/2,this.endEdge=$(window).height()+this.bgEdge)}},{key:"isAcrossBGEdge",value:function(){return this.itemPosition<=-this.bgEdge&&!this.isBGCrossProgress}},{key:"isAcrossEndEdge",value:function(){return this.getLastPosition()>=this.endEdge&&!this.isENDCrossProgress}},{key:"isFirstOut",value:function(e){return this.itemPosition<-(this.bgEdge+e.outerHeight())&&"vertical"==this.axis||this.itemPosition<-(this.bgEdge+e.outerWidth())&&"horizontal"==this.axis}},{key:"isLastOut",value:function(e){return e.offset().top>this.endEdge&&"vertical"==this.axis||e.offset().left>this.endEdge&&"horizontal"==this.axis}},{key:"setMotionDirection",value:function(){"down"==this.direction?(this.needSide="top",this.axis="vertical"):"left"==this.direction&&(this.needSide="left",this.axis="horizontal")}},{key:"isInsiteOfItem",value:function(){return"horizontal"==this.axis?this.mouseX>=this.hoverBgn&&this.mouseX<=this.hoverEnd:this.mouseY>=this.hoverBgn&&this.mouseY<=this.hoverEnd}},{key:"render",value:function(){var e=this;this.requestID=window.requestAnimationFrame(function t(){null!=e.hoveringItem&&(e.getEdgesOfHover(),e.isInsiteOfItem()||(e.hoveringItem.removeClass("-hover-"),e.hoveringItem=null)),e.onpause||(e.itemPosition-=e.itemSpeed),e.setPropsToFirst(e.firstItem),!e.onpause&&e.isCanReplace&&e.replaceObjects("next"),e.requestID&&(e.requestID=window.requestAnimationFrame(t))})}},{key:"stop",value:function(){this.requestID&&(window.cancelAnimationFrame(this.requestID),this.requestID=void 0)}},{key:"appendToEnd",value:function(){}},{key:"prependToStart",value:function(){}},{key:"setPropsToFirst",value:function(e){this.container.children().css("margin",0);var t="margin-"+this.needSide;e.css(t,this.itemPosition+"px")}},{key:"removeElem",value:function(e){e.remove()}}]),e}();